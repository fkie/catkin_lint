#!/usr/bin/make -f
# -*- makefile -*-
# This file was originally written by Joey Hess and Craig Small.
# As a special exception, when this file is copied by dh-make into a
# dh-make output file, you may use that output file without restriction.
# This special exception was added by Craig Small in version 0.37 of dh-make.

# Uncomment this to turn on verbose mode.
#export DH_VERBOSE=1

include /usr/share/dpkg/pkg-info.mk

export PYBUILD_NAME=catkin-lint
export PYBUILD_DESTDIR = debian/catkin-lint
export PYBUILD_INSTALL_ARGS = --install-lib=/usr/share/catkin-lint
export SETUPTOOLS_SCM_PRETEND_VERSION = $(DEB_VERSION_UPSTREAM)

%:
	dh $@ --with python3 --buildsystem=pybuild

execute_after_dh_auto_install:
	mv debian/catkin-lint/usr/bin/catkin_lint debian/catkin-lint/usr/share/catkin-lint/run

execute_before_dh_installman: debian/catkin_lint.1
	true

debian/catkin_lint.1: catkin_lint.pod
	pod2man --release="$(DEB_VERSION_UPSTREAM)" --center="Robot OS" $< > $@
